![[826历年真题解析-数据结构篇（包括算法题）-12.15.pdf#page=8&rect=23,578,578,808|826历年真题解析-数据结构篇（包括算法题）-12.15, p.8]]

![[Pasted image 20251126150418.png]]  
1. 根据组合数学原理，$n$个不同节点构成的二叉搜索树的种类数等于第$n$个 #卡特兰数 。卡特兰数的通项公式为：  [[卡特兰数常见的应用场景]] 
$$C_n=\frac{(2n)!}{n!(n+1)!}$$
	或者写作组合数形式： 
2. $n=5$，我们将数值代入公式计算：  
	1. $C_5=\frac{(2\times5)!}{5!(5+1)!}=\frac{10!}{5!6!}$  
3. 展开阶乘   
	1. $C_5=\frac{10\times9\times8\times7\times6\times5!}{5!\times(6\times5\times4\times3\times2\times1)}$
4. 最终计算  
	1. $C_5=3\times2\times7=42$  
- 衍生 
	- 进出栈序列（ #栈混洗 ）
		- **问题描述**：有$n$个元素依次入栈，求合法的出栈序列有多少种？
		*   **公式**：$C_n=\frac{1}{n+1}\binom{2n}{n}$
		*   **例子**：3个元素入栈，出栈序列有$C_3=5$种。这是最常见的变体。 
	* 括号匹配问题  
		*  **问题描述**：有$n$个左括号和$n$个右括号，这些括号能组成多少种合法的括号序列？（即任意前缀中左括号数量$\ge$右括号数量）。
		*   **公式**：$C_n$
		*   **例子**：$n=3$时，`((()))`, `()()()`, `(()())`, `(())()`, `()(())` 共5种。

![[Pasted image 20251126150431.png]]
[[Pasted image 20251119074051.png]]
1. 2019个叶节点的 #真二叉树 数目  
	1. 对于真二叉树（Full Binary Tree，又称 #严格二叉树 ，即每个节点要么是叶子，要么有两个子节点），如果叶子节点的数量为$n$，那么其构成的形态数目等于第$n-1$项卡特兰数，记为$C_{n-1}$。
	    在本题中，$n=2019$，所以真二叉树的数目为$C_{2019-1}=C_{2018}$  
2. 2018对括号组成的合法表达式数目  
	1. 这是卡特兰数最经典的定义之一。$n$对括号组成的合法匹配序列的数目等于第$n$项卡特兰数，记为$C_n$。
	    在本题中，$n=2018$，所以合法括号序列的数目为$C_{2018}$。  
3.  **结论**：
	左边的数目是$C_{2018}$，右边的数目也是$C_{2018}$。两者实际上是**相等**的。因此，题目中声称“数目少于”是错误的，答案为**错误($\times$)**。  
- 总结
	这道题考察的是考生是否知道**真二叉树的叶子数**与**卡特兰数**下标的对应关系（需减1），以及**括号匹配**与**卡特兰数**下标的对应关系（不减1）。记住$n$个节点的二叉树数量是$C_n$，而$n$个叶子的真二叉树数量是$C_{n-1}$，这是解题的关键陷阱。    

![[Pasted image 20251119074059.png]]
1.   **括号匹配问题**：
    $n$对括号组成的合法表达式数量，对应的是第$n$个卡特兰数，记为$C_n$。
    题目中给出了$2018$对括号，因此合法表达式的数量为$C_{2018}$。
2. #真二叉树 的计数问题 
	真二叉树（也称完满二叉树）是指所有节点的度要么为0（叶子节点），要么为2（内部节点）的二叉树。
    对于真二叉树，有一个重要的结论：**具有$k$个叶子节点的真二叉树的形态数量，等于第$k-1$个卡特兰数，即$C_{k-1}$。**
3. 题目要求真二叉树的数量等于$2018$对括号组成的合法表达式数量。
	即要求：
	$真二叉树数量 = 括号表达式数量$
	$C_{k-1} = C_{2018}$
4. 根据卡特兰数的一一对应关系，下标必须相等：
	$k - 1 = 2018$
	$k = 2019$
	因此，叶子节点的个数$k$为**2019**。答案选 **(B)**。  
![[Pasted image 20251119074105.png]]
- 这道题的核心在于建立“ #栈混洗”与“ #合法括号序列”之间的等价关系    
	- 分析右半部分（括号） [[栈混洗]]
		- 2024 个括号意味着有$2024\div2=1012$对括号。
		    在组合数学中，由$n$对括号构成的合法表达式的数量，等于第$n$项卡特兰数，记为$C_n$。
		    这里$n=1012$，所以合法表达式的数量为$C_{1012}$。
	- 分析左半部分（栈混洗） 
		- 题目问由多少个元素构成的栈混洗序列数量与上述相等。
	    设元素的个数为$x$。
	    对于$x$个不同元素进栈，其合法的出栈序列（栈混洗）的总数，也恰好等于第$x$项卡特兰数$C_x$。
- **建立等式：**
    题目要求两者数量“一样多”，即要求：
    $C_x=C_{1012}$
    显然，这意味着$x=1012$。
**结论：** 需要$1012$个元素构成的栈混洗序列。  

- 为什么栈混洗和括号匹配是等价的？  
	- 我们可以建立一个一一映射（Bijection）：
		*   **栈混洗：** 有$n$个元素。我们将“入栈”操作看作是一个左括号$($，“出栈”操作看作是一个右括号$)$。
		*   **限制条件：** 在任何时刻，出栈的次数不能超过入栈的次数（因为空栈不能弹出元素），且最终入栈次数等于出栈次数。
		*   这完全等价于：在括号序列中，从左往右数，右括号的数量在任何位置都不能超过左括号的数量，且左右括号总数相等。
		
		因此，$n$个元素的栈混洗方案数 $=$ $n$对括号的合法排列数 $=$ $C_n$。


![[Pasted image 20251119074120.png]]

这是一道关于 #逆波兰表达式RPN  也称为**后缀表达式**的题目。    [[逆波兰表达式RPN]] 
1. #逆波兰表达式的计算规则  
	1. 我们需要使用一个**栈（Stack）**数据结构。
		1.  从左到右扫描表达式。
		2.  遇到**数字**：压入栈中。
		3.  遇到**运算符**：从栈中弹出所需数量的操作数（通常是2个），进行运算，将结果压回栈中。
2. **针对本题的（修正性）推导：**
	设未知运算符为 $?$。
	表达式为：`0 ! * 2 2 * 6 + ^ 18 8 ? 9 / *`  
	1. 我们可以将表达式分为两部分来看：左侧部分和右侧部分，最后通过一个 `*` 连接  
		1. 第一步：分析左侧部分 `0 ! * 2 2 * 6 + ^`  
			1.  `0`：入栈。栈：$[0]$  
			2.  `!`：阶乘运算（单目）。$0!=1$。栈：$[1]$  
			3. `*`：**此处是题目回忆错误点**。乘法需要两个操作数，但栈中只有一个 $1$。为了继续推导，我们假设这里原本是一个能让逻辑通顺的数字或操作，或者假设左侧部分最终计算出一个基准值，记为 $A$。  
				1. 根据常见考题套路（如 $2^{10}=1024$），我们看后面的部分：
				    *   `2 2 *` $\rightarrow$ $2\times2=4$。
				    *   `6 +` $\rightarrow$ $4+6=10$。
				    *   `^` $\rightarrow$ 幂运算。
				    *   如果前面的基数是 $2$，那么 $2^{10}=1024$。这是一个在计算机考题中非常常见的数字。
		2. 第二步：分析右侧部分 `18 8 ? 9 /`  
			1. 此时栈中已有左侧的结果 $A$（假设为 1024）  
				*   `18`：入栈。
				*   `8`：入栈。
				*   `?`：这是我们要找的运算符。弹出 8 和 18，计算 $18?8$。设结果为 $B$。栈：$[A, B]$。
				*   `9`：入栈。栈：$[A, B, 9]$。
				*   `/`：弹出 9 和 $B$，计算 $B/9$。设结果为 $C$。栈：$[A, C]$。
		3. 第三步：最终运算 `*`  
			2. `*`：弹出 $C$ 和 $A$，计算 $A \times C$。
				*   题目给出最终结果为 **2016**。 
	2. 逆向求解：  
		1. 方程为：$A \times ((18 ? 8) / 9) = 2016$  
	3. 假设左侧部分 $A$ 是 $1024$（基于 $2^{10}$ 的推测），那么 $1024 \times C = 2016$，得出 $C \approx 1.96$。在整数运算的逆波兰题中，这通常意味着数字记忆有误  
3. 如果这是一道正常的题目，逻辑可能是这样的：左边算出 $2016$，右边算出 $1$，最终 $2016 \times 1 = 2016$。要让 `18 8 ? 9 /` 等于 1，若 $?$ 是 `+`，$(18+8)/9 = 26/9 \approx 2$；若 $?$ 是 `-`，$(18-8)/9 = 10/9 = 1$。所以如果是求结果不变，减法可能更合理。但既然答案给的是 `/`，说明原题的数字可能是类似 `72 8 / 9 /` ($72/8=9, 9/9=1$) 这样的组合。  
- 衍生的考点  
	- 中缀表达式转后缀表达式   #中缀转后缀  
		-   **考点：** 给定如 $a+b*c+(d*e+f)*g$ 的普通表达式，要求转换为后缀表达式。
			*   **方法：** 同样利用栈，但这次栈用来存运算符。
			    *   遇到数字直接输出。
			    *   遇到左括号 $($ 入栈。
			    *   遇到右括号 $)$ 弹出栈顶直到遇到 $($。
			    *   遇到运算符，比较优先级。若当前运算符优先级 $\le$ 栈顶运算符，则弹出栈顶输出，重复比较；否则入栈。
	- #表达式树的遍历     
		- **考点：** 给出一棵二叉树，叶子节点是操作数，内部节点是运算符。
		*   **公式/关系：**
		    *   **前序遍历 (Pre-order Traversal)** $\rightarrow$ **波兰表达式 (前缀)**
		    *   **中序遍历 (In-order Traversal)** $\rightarrow$ **中缀表达式** (需加括号)
		    *   **后序遍历 (Post-order Traversal)** $\rightarrow$ **逆波兰表达式 (后缀)**
		    *   例如：对于树结构，根节点为 $+$，左子树为 $a$，右子树为 $b$，后序遍历即为 $a b +$。
	*   #栈的操作深度  
		-   **考点：** 在计算某个逆波兰表达式的过程中，栈内元素个数的最大值是多少？
			*   **示例：** 对于 $1 \ 2 \ 3 \ * \ +$，
			    *   Push 1 (深度1)
			    *   Push 2 (深度2)
			    *   Push 3 (深度3)
			    *   Pop 2,3 Calc *, Push 6 (深度2)
			    *   Pop 1,6 Calc +, Push 7 (深度1)
			    *   最大深度为 3
	- #前缀表达式  
		- **考点：** 运算符在操作数之前。
		*   **计算方法：** 从**右向左**扫描，遇到数字入栈，遇到运算符弹出栈顶两个数计算（注意操作数顺序与RPN相反），结果入栈。
		*   **公式表示：** 类似 $+ a b$ 表示 $a+b$。

![[Pasted image 20251126150506.png]]
[[Pasted image 20251119074419.png]]
[[Pasted image 20251119074507.png]]
[[逆波兰表达式RPN]]  

1. 第一步：计算前半部分  
	1.  $0!$：$0$的阶乘是$1$。栈：$[1]$
	2.  $1$：入栈。栈：$[1, 1]$
	3.  $+$：弹出$1, 1$，计算$1+1=2$。栈：$[2]$
	4.  $2$：入栈。栈：$[2, 2]$
	5.  $3!$：$3$的阶乘是$6$。栈：$[2, 2, 6]$
	6.  $4$：入栈。栈：$[2, 2, 6, 4]$
	7.  $+$：弹出$4, 6$，计算$6+4=10$。栈：$[2, 2, 10]$
	8.  $^{\wedge}$（乘方）：弹出$10, 2$，计算$2^{10}=1024$。栈：$[2, 1024]$
	9.  $*$：弹出$1024, 2$，计算$2*1024=2048$。栈：$[2048]$
2. 第二步：计算中间部分  
	1. 此时栈底已经是$2048$，我们继续处理后面的数字：
		1. $5$：入栈。栈：$[2048, 5]$
		2. $6!$：$6$的阶乘是$720$。栈：$[2048, 5, 720]$
		3. $7$：入栈。栈：$[2048, 5, 720, 7]$
		4. $*$：弹出$7, 720$，计算$720*7=5040$。栈：$[2048, 5, 5040]$
		5. $8!$：$8$的阶乘是$40320$。栈：$[2048, 5, 5040, 40320]$
3. 第三步：处理未知运算符 ?  
	1. 此时遇到了未知运算符$?$。根据规则，它作用于栈顶的两个数。
		设$x=5040?40320$。
		执行后，栈变为：$[2048, 5, x]$
4. 第四步：继续后续运算并建立方程 
	1. $/$：弹出$x, 5$，计算$5/x$。栈：$[2048, 5/x]$
	2. $-$：弹出$5/x, 2048$，计算$2048 - 5/x$。栈：$[2048 - 5/x]$
	3. $9$：入栈。栈：$[2048 - 5/x, 9]$
	4. $+$：弹出$9, (2048 - 5/x)$，计算$2048 - 5/x + 9$。
5. 第五步：求解  
	1. 题目给出最终结果为$2017$，因此建立方程：
		$2048 - \frac{5}{x} + 9 = 2017$
		$2057 - \frac{5}{x} = 2017$
		$\frac{5}{x} = 40$
		$x = \frac{5}{40} = \frac{1}{8}$
	回到第三步，我们需要找到一个运算符$?$，使得：
	$5040 \ ? \ 40320 = \frac{1}{8}$
	
	观察数字关系：
	$5040 \times 8 = 40320$
	所以，$5040 \div 40320 = \frac{5040}{40320} = \frac{1}{8}$
	
	因此，**? 处的运算符为除号（/）**。对应选项 **(D)**。



![[Pasted image 20251126150502.png]]

[[Pasted image 20251119074513.png]]



![[Pasted image 20251126150535.png]][[Pasted image 20251119074518.png]]

[[c++运算符优先级]]   
![[Pasted image 20251126150542.png]]
[[Pasted image 20251119074534.png]]


![[Pasted image 20251126150551.png]]
[[Pasted image 20251119074542.png]]
[[Pasted image 20251119074546.png]]


![[Pasted image 20251126150601.png]]
[[Pasted image 20251119074554.png]]


![[Pasted image 20251126150606.png]]
[[Pasted image 20251119074601.png]]

 像Z
![[Pasted image 20251126150612.png]]
[[Pasted image 20251119074607.png]]


![[Pasted image 20251126150618.png]]
[[Pasted image 20251119074614.png]]


![[Pasted image 20251126150625.png]]
[[Pasted image 20251119074621.png]]



![[Pasted image 20251119081354.png]]![[Pasted image 20251119081405.png]] 