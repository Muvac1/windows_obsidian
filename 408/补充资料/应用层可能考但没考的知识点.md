![[Pasted image 20251216212258.png]]

这是一份针对图片中列出的“可能会考但尚未考过的题型”整理的专项练习题及详解。这些题目旨在帮助你加深对**DNS解析机制**、**FTP连接机制**以及**常见应用层协议端口/传输方式**的理解。

---

### 第一部分：DNS 解析过程中的查询次数与方式
**考点核心：** 区分递归查询（Recursive）与迭代查询（Iterative），以及计算在一次完整的域名解析过程中产生的报文数量。

#### 【习题 1】（计算题）
假设主机 A 向本地域名服务器查询 `www.example.com` 的 IP 地址。
1. 主机 A 向本地域名服务器采用**递归查询**。
2. 本地域名服务器向互联网上的根域名服务器、顶级域名服务器、权限域名服务器采用**迭代查询**。
3. 假设本地域名服务器中没有该域名的缓存。

**问题：** 在整个解析过程中，本地域名服务器（Local DNS Server）一共发出了多少次 DNS 查询请求？主机 A 一共收到了多少个 DNS 响应报文？

> **答案与解析：**
> *   **本地域名服务器发出的查询次数：** **3次**。
>    *   第一次：向根域名服务器查询（返回顶级域 .com 的 IP）。
>    *   第二次：向 .com 顶级域名服务器查询（返回 example.com 权限服务器的 IP）。
>    *   第三次：向 example.com 权限域名服务器查询（返回 www.example.com 的 IP）。
> *   **主机 A 收到的响应报文：** **1个**。
>    *   因为主机 A 采用的是递归查询，它只负责发一次请求给本地服务器，然后等待最终结果。

#### 【习题 2】（概念辨析题）
关于 DNS 查询方式，下列说法错误的是（  ）。
A. 递归查询中，被查询的服务器必须给出最终的查询结果或错误信息。
B. 迭代查询中，被查询的服务器可能只返回下一级服务器的地址，让查询者自己再去查询。
C. 互联网上的根域名服务器通常只接受递归查询，以减轻负载。
D. 为了提高效率，DNS 解析过程中广泛使用了高速缓存机制。

> **答案与解析：**
> **选 C**。
> *   **解析：** 实际上，为了减轻根域名服务器的压力，根域名服务器通常**只接受迭代查询**（或者说，它告诉本地域名服务器“你去问下一级”，而不是自己跑腿去帮本地域名服务器问到底）。如果根服务器接受全球所有请求的递归查询，它会不堪重负。A、B 是递归和迭代的定义，D 是 DNS 优化的核心手段，均正确。

---

### 第二部分：FTP 协议（数据连接与控制连接）
**考点核心：** 理解 FTP 的“带外控制”（Out-of-band control），即控制信息和数据传输使用不同的连接（端口）。

#### 【习题 3】（连接机制题）
用户使用 FTP 客户端与服务器建立连接后，上传了 3 个文件，然后断开连接。在整个过程中，FTP 客户端与服务器之间建立的 TCP 连接数量至少是多少？
A. 2 个
B. 3 个
C. 4 个
D. 6 个

> **答案与解析：**
> **选 C**。
> *   **解析：**
>    1.  **控制连接（Control Connection）：** 在整个会话期间一直保持打开状态。需要 **1** 个连接。
>    2.  **数据连接（Data Connection）：** 它是非持久的。每传输一个文件（无论是上传、下载还是列出目录清单），都需要建立一个新的数据连接，传输完毕后关闭。这里上传了 3 个文件，所以需要建立 **3** 次数据连接。
>    *   **总计：** 1（控制） + 3（数据） = **4 个** TCP 连接。

#### 【习题 4】（端口与模式题）
关于 FTP 协议的端口和连接，下列描述正确的是（ ）。
A. FTP 的控制连接使用 UDP 21 端口。
B. 在被动模式（PASV）下，服务器使用 20 端口主动连接客户端。
C. 数据连接主要用于传输文件内容，控制连接主要用于发送 USER、PASS、LIST 等命令。
D. 控制连接和数据连接使用同一个端口进行复用。

> **答案与解析：**
> **选 C**。
> *   **解析：**
>    *   A 错误：FTP 基于 TCP，不是 UDP。
>    *   B 错误：在**主动模式（PORT）**下，服务器才用 20 端口主动连客户端；在**被动模式（PASV）**下，服务器会开启一个随机端口告知客户端，由客户端去连服务器，不使用 20 端口。
>    *   C 正确：这是 FTP 的核心特征，控制与数据分离。
>    *   D 错误：HTTP 可以在同一个连接里传头和数据（带内控制），但 FTP 是分开的（带外控制）。

---

### 第三部分：应用层协议的端口号与 TCP/UDP
**考点核心：** 记忆常见协议的默认端口及其下层使用的传输层协议（除了 SNMP）。

#### 【习题 5】（匹配填空题）
请将下列应用层协议与其对应的**熟知端口号**及**传输层协议**进行匹配。

| 应用层协议 | 端口号 | 传输层协议 (TCP/UDP) |
| :--- | :--- | :--- |
| (1) SMTP | \_\_\_\_\_ | \_\_\_\_\_ |
| (2) POP3 | \_\_\_\_\_ | \_\_\_\_\_ |
| (3) DNS | \_\_\_\_\_ | \_\_\_\_\_ |
| (4) TFTP | \_\_\_\_\_ | \_\_\_\_\_ |
| (5) HTTPS | \_\_\_\_\_ | \_\_\_\_\_ |
| (6) DHCP | \_\_\_\_\_ | \_\_\_\_\_ |

> **答案与解析：**
> 1.  **SMTP**: 端口 **25**，使用 **TCP**。（邮件发送）
> 2.  **POP3**: 端口 **110**，使用 **TCP**。（邮件接收）
> 3.  **DNS**: 端口 **53**，主要使用 **UDP**（用于查询），但也使用 TCP（用于区域传送，Zone Transfer）。*注：考试中若无特殊说明，DNS查询通常默认为UDP。*
> 4.  **TFTP** (简单文件传输协议): 端口 **69**，使用 **UDP**。（注意与 FTP 的区别）
> 5.  **HTTPS**: 端口 **443**，使用 **TCP**。
> 6.  **DHCP**: 端口 **67 (服务器) / 68 (客户端)**，使用 **UDP**。

#### 【习题 6】（选择题）
下列应用层协议中，默认使用 UDP 协议进行封装的是（ ）。
A. HTTP
B. TELNET
C. TFTP
D. IMAP

> **答案与解析：**
> **选 C**。
> *   **解析：**
>    *   **TFTP (Trivial File Transfer Protocol)** 设计简单，为了减少开销，运行在 UDP 之上，需要自己在应用层处理可靠性（如停止等待协议）。
>    *   HTTP (80), TELNET (23), IMAP (143) 均需要可靠的连接，因此都运行在 TCP 之上。

---

### 总结建议
针对图片中提到的这三个点，复习时请重点关注：
1.  **DNS 画图：** 脑海里要有一张图，从 Host -> Local DNS -> Root -> TLD -> Auth 的箭头流向。
2.  **FTP 计数：** 记住“N个文件 = N+1个连接”。
3.  **协议列表：** 考前突击背诵“协议-端口-TCP/UDP”对照表，特别是 **DNS (UDP 53)** 和 **TFTP (UDP 69)** 这两个容易搞混的特例。
