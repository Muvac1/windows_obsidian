#数据封装过程 （以 ping 为例）

ping 命令发送一个 ICMP Echo Request 报文的过程完美地展示了这种封装：

1.  **应用层**：用户执行 ping 命令。
2.  **网络层 (ICMP)**：操作系统内核构建一个 ICMP Echo Request 报文。
3.  **网络层 (IP)**：内核将此 ICMP 报文作为数据，添加 IP 头部，形成 IP 数据报。IP 头部中的目标地址是 ping 的目标主机地址，协议字段设为1。
    *   封装结构：$IP_{header} [ ICMP_{header} + ICMP_{data} ]$
4.  **数据链路层 (如以太网)**：内核将整个 IP 数据报作为数据，添加以太网头部和尾部（帧校验序列），形成以太网帧。
    *   封装结构：$Ethernet_{header} [ IP_{header} [ ICMP_{header} + ICMP_{data} ] ] Ethernet_{trailer}$
5.  **物理层**：将以太网帧转换为电信号或光信号在网络介质上传输。

提问：一个 HTTP 请求从客户端发送到服务器，数据依次经过的封装是？
*   答案：HTTP 消息 -> TCP 段 -> IP 数据报 -> 以太网帧