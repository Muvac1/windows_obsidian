![[Pasted image 20251216212916.png]]


这是一份针对图片中提到的**“可能会考但尚未考过的题型”**的专项练习与解答。

根据图片提示，这似乎涉及 **826/912（计算机学科专业基础综合，通常指浙江大学等高校的考研科目）** 的特定考点。特别要注意图中强调的“SR协议采用累计确认”这一特殊设定。

---

### 第一部分：GBN与SR协议的重传帧数问题
**（重点关注：图片中提到的“SR采用累计确认”的特殊情况）**

#### 习题 1：GBN（后退N帧）协议
**题目：**
设发送方采用了 GBN 协议，发送窗口大小 $W_T = 5$，帧序号采用 3 bit 编码。发送方连续发送了 0, 1, 2, 3, 4 号帧。假设 0, 1 号帧顺利到达并被确认，但 2 号帧在传输中丢失，而 3, 4 号帧顺利到达接收方。请问：
1. 接收方针对 3, 4 号帧会做什么处理？发送回什么确认？
2. 发送方超时后，需要重传哪些帧？总共重传几帧？

**解答：**
1.  **接收方处理：** GBN 接收方**不缓存**乱序到达的帧。由于期待的是 2 号帧，但收到了 3 和 4，接收方会**丢弃** 3 和 4 号帧。对于收到的每个乱序帧（或根据实现，重复发送旧确认），接收方会发送当前期待接收的帧号的前一个确认（或期待的帧号）。通常情况下，接收方会重复发送针对 1 号帧的确认（ACK 1 或 ACK 2，取决于ACK定义是“收到”还是“期待下一帧”）。
2.  **重传内容：** 发送方在 2 号帧超时后，因为 GBN 采取“累积确认”且无缓存机制，必须重传 2 号帧以及之后发送过的所有帧。
3.  **结论：** 发送方需要重传 **2, 3, 4** 号帧。总共重传 **3** 帧。

---

#### 习题 2：SR（选择重传）协议 —— 结合图片“累计确认”考点
**题目：**
**（注意：本题基于图片提示的“特南鲍姆书代码”逻辑，即 SR 协议采用累计确认，但接收方有缓存能力）**
设发送方采用 SR 协议，发送窗口 $W_T = 4$，接收窗口 $W_R = 4$。发送方连续发送了帧 0, 1, 2, 3。
- 0 号帧成功接收。
- 1 号帧丢失。
- 2, 3 号帧成功到达接收方。
请问：
1. 接收方收到 2, 3 号帧时如何处理？
2. 如果采用题目提示的“累计确认”机制（类似 TCP 的逻辑但用于 SR 上下文），发送方超时后，主要重传哪一帧？这与 GBN 有何本质区别？

**解答：**
1.  **接收方处理：** SR 协议的关键特点是**接收方有缓存**。接收方会把 2, 3 号帧**缓存**起来，标记为“已接收但未按序交付”。
2.  **确认机制（关键点）：**
    *   **普通 SR（教科书通用）：** 通常对 2, 3 单独发送 ACK。
    *   **图片提及的“累计确认”SR（特南鲍姆/826考点）：** 这里的累计确认意味着 ACK $n$ 表示“期待收到 $n$ 号帧，且 $n$ 之前的都收到了”。
    *   当 0 到达，发送 ACK 1（期待 1）。
    *   当 1 丢失，2 到达：接收方缓存 2，但不能更新累计确认号（因为缺 1），所以可能重复发送 ACK 1（或者不发新 ACK，取决于具体实现，但通常会提示发送方 1 没到）。
    *   当 3 到达：接收方缓存 3，依然ACK 1。
3.  **重传内容：**
    *   发送方针对 1 号帧超时。
    *   由于 SR 协议发送方知道接收方有缓存能力（或者只针对超时的帧重传），发送方**只重传 1 号帧**。
    *   **本质区别：** 一旦 1 号帧重传并到达，接收方发现缓存中已有 2, 3，于是窗口一下子向前滑动，直接交付 1, 2, 3，并发送 ACK 4。
    *   **结论：** 重传帧数为 **1** 帧（即丢失的那一帧）。

**应试备注（Tip）：**
如果在考试中遇到 SR 题，一定要看清题目是否强调“接收窗口 > 1”或“接收方有缓存”。**只要有缓存，不管 ACK 是独立的还是累计的，重传通常只针对丢失的帧（及其后未被缓存的帧），而不是像 GBN 那样无脑重传之后所有帧。** 所谓的“SR用累计确认”，在做题时的核心影响是 ACK 的数值含义（期待下一帧），而不是重传逻辑的退化。

---

### 第二部分：组帧方法的特点与结果

#### 习题 3：零比特填充法 (Bit Stuffing)
**题目：**
在使用 HDLC 或 PPP 协议（同步传输）时，采用零比特填充法（Bit Stuffing）。
已知原始数据比特流为：`0110111111011111001`
请写出经过零比特填充后的发送比特流。

**解答：**
*   **规则：** 只要发现 5 个连续的 `1`，就在其后插入一个 `0`。
*   **处理过程：**
    1.  `011011111` -> 发现5个1 -> 插入0 -> `0110111110`
    2.  接下来的数据是 `1`（原数据的第10位），加上刚才的流 -> `...111110 1`
    3.  接下来的数据 `011111` -> 发现5个1 -> 插入0 -> `...10111110`
    4.  剩余 `001`。
*   **结果：** `011011111`**`0`**`1011111`**`0`**`001`
    （加粗部分为插入的0）

#### 习题 4：字节填充法 (Byte Stuffing) —— 常见于 PPP 异步传输
**题目：**
PPP 协议使用 `0x7E` (01111110) 作为标志字段（Flag）。如果信息字段中出现了与标志字段相同的一字节 `0x7E`，或者出现了转义字符 `0x7D`，需要进行字节填充（转义）。
**规则：** 将出现的 `7E` 变为 `7D 5E`；将出现的 `7D` 变为 `7D 5D`。（即：插入 7D，并将原字符与 0x20 异或）。
**输入数据（十六进制）：** `45 7E 23 7D 11`
请写出填充后的输出数据序列。

**解答：**
1.  `45` -> 保持不变 -> `45`
2.  `7E` -> 冲突，转义 -> `7D 5E`
3.  `23` -> 保持不变 -> `23`
4.  `7D` -> 冲突，转义 -> `7D 5D`
5.  `11` -> 保持不变 -> `11`
*   **结果：** `45 7D 5E 23 7D 5D 11`

---

### 第三部分：PPP 协议 (Point-to-Point Protocol)

#### 习题 5：PPP 协议的组成与特性（选择/判断题）
**题目：**
关于 PPP 协议，以下说法错误的是？
A. PPP 协议只支持全双工链路。
B. PPP 协议提供差错检测（CRC），但不提供纠错和流量控制。
C. PPP 协议包含 LCP（链路控制协议）和 NCP（网络控制协议）。
D. PPP 协议必须使用 ARP 协议来解析 MAC 地址。

**解答：**
*   **答案：** **D**
*   **解析：**
    *   A 正确：PPP 设计用于点对点全双工。
    *   B 正确：PPP 是不可靠传输协议，查出错误直接丢弃，不负责重传（由上层如TCP负责），也没有滑动窗口进行流量控制。
    *   C 正确：LCP 用于建立底层物理链路，NCP 用于配置上层网络协议（如 IPCP 配置 IP 地址）。
    *   **D 错误：** PPP 是点对点协议，链路上只有两个节点，不需要 MAC 地址寻址，因此**不需要 ARP 协议**。PPP帧格式中通常没有 MAC 地址字段（或者全是 FF）。

#### 习题 6：PPP 的工作状态机（简答题）
**题目：**
简述 PPP 链路建立、使用和释放的典型过程（状态转移）。

**解答：**
1.  **静止状态 (Dead)：** 物理层连接未建立。
2.  **建立状态 (Establish)：** 设备检测到载波，物理层激活。双方通过 **LCP (Link Control Protocol)** 发送配置请求帧，协商链路参数（如 MRU、认证方式等）。LCP 配置成功后进入下一状态。
3.  **认证状态 (Authenticate)：** （可选）如果协商了认证，此时进行 PAP 或 CHAP 认证。认证失败则链路终止；成功则进入网络层协议状态。
4.  **网络层协议状态 (Network)：** 双方通过 **NCP (如 IPCP)** 分配 IP 地址等网络层参数。此时链路打开 (Open)，可以进行数据传输。
5.  **终止状态 (Terminate)：** 数据传输完毕，通过 LCP 发送终止请求，释放链路。

---

### 总结与复习建议

1.  **GBN vs SR：** 考试如果考代码实现（826/912特色），一定要注意 **ACK的含义**。
    *   GBN：ACK $n$ = 收到 $n$，期待 $n+1$（或者 ACK $n$ = 期待 $n$，视教材定义）。丢包后重传 $n$ 及之后所有。
    *   SR：通常是对号入座确认。但如果提到“累计确认的SR”，记住**“接收方有缓存”**是核心。只要有缓存，发送方通常**只重传超时的那个帧**。
2.  **组帧：** 也就是考察你在比特流里“数1”的能力（5个1填0），或者十六进制里“找7E/7D”的能力。细心即可。
3.  **PPP：** 记住它**没有**流量控制，**没有**纠错，**不需要**ARP，由 **LCP + NCP** 组成。