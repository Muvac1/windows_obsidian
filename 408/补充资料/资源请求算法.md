* #资源请求算法   
* **问题模式**: 进程 $P_i$ 发出一个资源请求 $Request_i$。系统是否应该立即批准这个请求？
    *   **解题步骤**:
        1.  **合法性检查**: 检查 $Request_i \le Need_i$。如果请求超过了其声明的最大需求，则为错误请求。
        2.  **可用性检查**: 检查 $Request_i \le Available$。如果当前可用资源不足，则 $P_i$ 必须等待。
        3.  **安全性检查 (核心)**:
            *   **假定分配**: 暂时修改系统状态，模拟资源已分配给 $P_i$:
                *   $Available = Available - Request_i$
                *   $Allocation_i = Allocation_i + Request_i$
                *   $Need_i = Need_i - Request_i$
            *   **运行安全性算法**: 对这个**新的假定状态**运行上面介绍的安全性算法。
            *   **决策**:
                *   如果新状态是**安全**的，则正式批准请求，系统状态保持为修改后的状态。
                *   如果新状态是**不安全**的，则拒绝该请求，将系统状态**恢复**到假定分配之前的状态，并让 $P_i$ 等待。