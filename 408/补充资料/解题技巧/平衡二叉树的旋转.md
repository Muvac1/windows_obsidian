
### 什么是平衡旋转？

平衡旋转是在 #自平衡二叉搜索树 中进行的一种操作，其目的是为了在插入或删除节点后，维护树的平衡状态。

*   **为什么需要旋转？**
    标准的二叉搜索树在最坏的情况下（例如，插入一个有序序列），可能会退化成一个链表，导致其搜索、插入和删除操作的时间复杂度从高效的 O(log n) 下降到低效的 O(n)。
*   **旋转做了什么？**
    旋转是一种局部调整树结构的操作。它可以在不破坏二叉搜索树基本性质（即左子节点 < 父节点 < 右子节点）的前提下，降低较高子树的高度，同时增加较矮子树的高度，从而使整个树重新达到平衡。

最著名的一种自平衡二叉搜索树就是**AVL树**。AVL树要求树中任何节点的左、右子树高度差（称为**平衡因子**）的绝对值不能超过1。 当插入或删除节点导致某个节点的平衡因子变成 `+2` 或 `-2` 时，树就失衡了，此时必须通过旋转来恢复平衡。

### 平衡旋转的四种类型

导致树失衡的情况可以归结为四种，因此也对应了四种旋转类型。 通常用两个字母来命名，第一个字母表示失衡节点（A）的哪一侧子树更高（L代表左，R代表右），第二个字母表示在这棵较高的子树中，是它的左（L）还是右（R）分支更长。

下面我们以节点`A`作为第一个发现失衡的节点（也叫“最小失衡子树”的根）来进行说明：

---

#### 1. 左-左（LL）型：右单旋转

*   **失衡原因**：在新节点插入到 `A` 的**左**子树的**左**子节点下之后，`A` 的平衡因子变为 +2。
*   **结构示意**：
    ```
          A (+2)             B
         / \                / \
        B (+1)      =>     C   A
       / \                  / \
      C   ...              ... ...
    ```
*   **解决方法**：对失衡节点 `A` 进行一次**向右的单旋转**。
    *   将 `B` 向上提，成为新的根节点。
    *   将 `A` 向下降，成为 `B` 的右子节点。
    *   `B` 原来的右子树，成为 `A` 的新左子树。

---

#### 2. 右-右（RR）型：左单旋转

*   **失衡原因**：在新节点插入到 `A` 的**右**子树的**右**子节点下之后，`A` 的平衡因子变为 -2。
*   **结构示意**：
    ```
      A (-2)                 B
     / \                    / \
    ... B (-1)      =>     A   C
       / \                  / \
      ... C                ... ...
    ```
*   **解决方法**：对失衡节点 `A` 进行一次**向左的单旋转**。
    *   将 `B` 向上提，成为新的根节点。
    *   将 `A` 向下降，成为 `B` 的左子节点。
    *   `B` 原来的左子树，成为 `A` 的新右子树。

---

#### 3. 左-右（LR）型：先左后右双旋转

*   **失衡原因**：在新节点插入到 `A` 的**左**子树的**右**子节点下之后，`A` 的平衡因子变为 +2。
*   **结构示意**：
    ```
          A (+2)             A (+2)             C
         / \                / \                / \
        B (-1)      =>     C (+1)     =>      B   A
       / \                / \                / \ / \
      ... C              B   ...            ... ... ...
    ```
*   **解决方法**：需要进行两次旋转（双旋转）。
    1.  **先左旋**：对 `A` 的左孩子 `B` 进行一次**向左旋转**。
    2.  **再右旋**：对 `A` 本身进行一次**向右旋转**。

---

#### 4. 右-左（RL）型：先右后左双旋转

*   **失衡原因**：在新节点插入到 `A` 的**右**子树的**左**子节点下之后，`A` 的平衡因子变为 -2。
*   **结构示意**：
    ```
      A (-2)                 A (-2)             C
     / \                    / \                / \
    ... B (+1)      =>     ... C (-1)   =>      A   B
       / \                    / \              / \ / \
      C   ...                ... B            ... ... ...
    ```
*   **解决方法**：需要进行两次旋转（双旋转）。
    1.  **先右旋**：对 `A` 的右孩子 `B` 进行一次**向右旋转**。
    2.  **再左旋**：对 `A` 本身进行一次**向左旋转**。

> 在你之前提供的那道题目中，遇到的正是 **RL 型不平衡**，因此需要先对节点 `53` 进行右旋，再对节点 `24` 进行左旋来恢复整棵树的平衡。