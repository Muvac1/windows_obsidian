[[位运算常考考点]] 
好的，我们来系统地讲解一下 **位运算 (Bitwise Operations)** 这个知识点。

### 1. 什么是位运算？

**核心思想**：计算机中所有的数据，无论是数字、字符还是图片，最终都以二进制（0和1的序列）形式存储。**位运算**就是直接对这些二进制位（bit）进行操作的运算。

它与我们平时的算术运算（+ - * /）和逻辑运算（&& || !）不同：
*   **算术运算**：操作的是数值本身的大小。
*   **逻辑运算**：操作的是布尔值（`true` 或 `false`）。
*   **位运算**：操作的是数值在内存中的**每一个二进制位**。

因为位运算是直接在硬件层面支持的，所以它的**速度极快**，是实现高性能计算和底层操作的基石。

---

### 2. 六种基本的位运算符

我们以两个8位的二进制数为例进行讲解：
`a = 5`  (二进制: `00000101`)
`b = 3`  (二进制: `00000011`)

#### 2.1 按位与 (AND) - `&`

*   **规则**：两位都为1，结果才为1；否则为0。（**同1为1，有0为0**）
*   **示例**：`5 & 3`
    ```
      00000101  (5)
    & 00000011  (3)
    ----------------
      00000001  (1) 
    ```
    所以，`5 & 3` 的结果是 `1`。
*   **主要用途**：
    1.  **清零（置0）**：将一个数的某些位变成0，而其他位不变。例如，`x & 0` 结果永远是 `0`。
    2.  **取特定位（掩码）**：判断一个数的某一位是0还是1。例如，要判断 `x` 的第3位是否为1，可以计算 `x & 8` (二进制 `1000`)。如果结果不为0，则第3位是1。
    3.  **判断奇偶**：`x & 1`。如果结果是1，`x`是奇数；如果结果是0，`x`是偶数。

#### 2.2 按位或 (OR) - `|`

*   **规则**：两位中只要有一个为1，结果就为1；否则为0。（**有1为1，同0为0**）
*   **示例**：`5 | 3`
    ```
      00000101  (5)
    | 00000011  (3)
    ----------------
      00000111  (7)
    ```
    所以，`5 | 3` 的结果是 `7`。
*   **主要用途**：
    1.  **置1**：将一个数的某些位变成1，而其他位不变。例如，要将 `x` 的第3位置为1，可以计算 `x | 8`。

#### 2.3 按位异或 (XOR) - `^`

*   **规则**：两位相同（同为0或同为1），结果为0；两位不同，结果为1。（**相同为0，不同为1**）
*   **示例**：`5 ^ 3`
    ```
      00000101  (5)
    ^ 00000011  (3)
    ----------------
      00000110  (6)
    ```
    所以，`5 ^ 3` 的结果是 `6`。
*   **主要用途**：
    1.  **翻转特定位**：`x ^ mask` 可以翻转 `mask` 中为1的那些位。例如 `x ^ 11111111` 会翻转x的所有位。
    2.  **交换两个变量**（不使用临时变量）：`a = a ^ b; b = a ^ b; a = a ^ b;`
    3.  **简单加密/校验**：因为 `(a ^ b) ^ b = a`，异或两次等于原值。
    4.  **算法题**：常用于查找数组中只出现一次/奇数次的元素。

#### 2.4 按位非 (NOT) - `~`

*   **规则**：这是一个单目运算符，将所有的0变成1，所有的1变成0。（**逐位取反**）
*   **注意点**：这个运算在处理有符号整数时需要特别小心，因为它涉及到**补码**。
*   **示例**：`~5` (假设是8位整数)
    ```
        00000101  (5的原码/补码)
    ~
    ----------------
        11111010  (这是结果的补码表示)
    ```
    `11111010` 是一个负数的补码。要计算它的值：
    1.  减1：`11111001`
    2.  取反：`00000110` (这是6)
    所以，`11111010` 代表的十进制数是 `-6`。
    **结论：对于任何整数 `x`，`~x` 的结果是 `-(x + 1)`。**

#### 2.5 左移 (Left Shift) - `<<`

*   **规则**：`a << n` 将 `a` 的所有二进制位向左移动 `n` 位，右边空出的位用 `0` 填充。
*   **示例**：`5 << 2`
    ```
      00000101  (5)
    << 2
    ----------------
      00010100  (20)
    ```
    所以，`5 << 2` 的结果是 `20`。
*   **数学意义**：在不发生溢出的情况下，左移 `n` 位相当于乘以 $2^n$。 `5 * 2^2 = 5 * 4 = 20`。

#### 2.6 右移 (Right Shift) - `>>`

*   **规则**：`a >> n` 将 `a` 的所有二进制位向右移动 `n` 位。
*   **注意点**：右移分为两种：
    1.  **逻辑右移**：左边空出的位用 `0` 填充。通常用于**无符号整数 (unsigned)**。
    2.  **算术右移**：左边空出的位用**符号位**填充（正数补0，负数补1）。通常用于**有符号整数 (signed)**。大多数编程语言（如C/C++/Java）对有符号数执行算术右移。
*   **示例 1 (正数)**：`5 >> 1`
    ```
      00000101  (5)
    >> 1
    ----------------
      00000010  (2)  (左边补0)
    ```
*   **示例 2 (负数)**：`-5 >> 1` (假设8位)
    -   -5 的补码是 `11111011`
    ```
      11111011  (-5)
    >> 1
    ----------------
      11111101  (-3)  (左边补符号位1)
    ```
*   **数学意义**：右移 `n` 位相当于除以 $2^n$（向下取整）。`5 / 2^1 = 2.5 -> 2`。 `-5 / 2 = -2.5 -> -3`。

---

### 3. 总结与速查表

| 运算符 | 名称     | 规则                           | 示例 (`a=5, b=3`) | 常见用途                         |
| :----- | :------- | :----------------------------- | :---------------- | :------------------------------- |
| `&`    | 按位与   | 两位都为1，结果为1             | `a & b` -> `1`    | 清零、取特定位、判断奇偶         |
| `|`    | 按位或   | 只要有1，结果就为1             | `a | b` -> `7`    | 置1、设置状态位                  |
| `^`    | 按位异或 | 两位不同，结果为1；相同为0     | `a ^ b` -> `6`    | 翻转特定位、交换变量、简单加密   |
| `~`    | 按位非   | 0变1，1变0                     | `~a` -> `-6`      | 取反码，`~x = -(x+1)`              |
| `<<`   | 左移     | 各个位向左移动，右边补0        | `a << 1` -> `10`  | 乘以2的幂（高效）                |
| `>>`   | 右移     | 各个位向右移动，左边补符号位/0 | `a >> 1` -> `2`   | 除以2的幂（高效）                |

位运算是理解计算机底层工作原理的窗口，也是编写高效、精炼代码的强大工具。在考研复习中，熟练掌握其原理和应用场景，对你解决计算机组成原理、操作系统乃至算法题都有极大的帮助。