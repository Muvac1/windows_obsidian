
$I_n = \frac{x}{2a^2(n-1)(x^2+a^2)^{n-1}} + \frac{2n-3}{2a^2(n-1)}I_{n-1}$
条件 设 $I_k = \int \frac{dx}{(x^2+a^2)^k}$。我们的目标是建立 $I_n$ 和 $I_{n-1}$ 的关系

这个公式本身是通过**分部积分法 (Integration by Parts)** 推导出来的。推导过程有点技巧性，但能帮助你更深刻地理解它。

基本思路是对积分 $I_{n-1} = \int \frac{dx}{(x^2+a^2)^{n-1}}$ 进行分部积分，然后整理出 $I_n$ 的表达式。

1.  设 $I_k = \int \frac{dx}{(x^2+a^2)^k}$。我们的目标是建立 $I_n$ 和 $I_{n-1}$ 的关系。
2.  对 $I_{n-1}$ 使用分部积分法 $\int u dv = uv - \int v du$。
    令 $u = \frac{1}{(x^2+a^2)^{n-1}}$ 且 $dv = dx$。
    则 $du = -(n-1)(x^2+a^2)^{-n}(2x)dx = \frac{-2x(n-1)}{(x^2+a^2)^n}dx$ 且 $v=x$。
3.  代入分部积分公式：
    $I_{n-1} = \frac{x}{(x^2+a^2)^{n-1}} - \int x \left( \frac{-2x(n-1)}{(x^2+a^2)^n} \right) dx$
    $I_{n-1} = \frac{x}{(x^2+a^2)^{n-1}} + 2(n-1) \int \frac{x^2}{(x^2+a^2)^n} dx$
4.  这里的技巧是处理积分项中的 $x^2$。我们把它写成 $x^2 = (x^2+a^2) - a^2$。
    $\int \frac{x^2}{(x^2+a^2)^n} dx = \int \frac{(x^2+a^2)-a^2}{(x^2+a^2)^n} dx = \int \frac{1}{(x^2+a^2)^{n-1}}dx - \int \frac{a^2}{(x^2+a^2)^n}dx$
    这个式子等于 $I_{n-1} - a^2 I_n$。
5.  将第4步的结果代回第3步：
    $I_{n-1} = \frac{x}{(x^2+a^2)^{n-1}} + 2(n-1)(I_{n-1} - a^2 I_n)$
6.  现在，我们的目标是解出 $I_n$。展开并整理上式：
    $I_{n-1} = \frac{x}{(x^2+a^2)^{n-1}} + 2(n-1)I_{n-1} - 2a^2(n-1)I_n$
    $2a^2(n-1)I_n = \frac{x}{(x^2+a^2)^{n-1}} + (2(n-1)-1)I_{n-1}$
    $2a^2(n-1)I_n = \frac{x}{(x^2+a^2)^{n-1}} + (2n-3)I_{n-1}$
7.  最后，两边同时除以 $2a^2(n-1)$，就得到了递推公式：
    $I_n = \frac{x}{2a^2(n-1)(x^2+a^2)^{n-1}} + \frac{2n-3}{2a^2(n-1)}I_{n-1}$