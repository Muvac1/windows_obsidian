#### 详细解题步骤：

**第一步：分解函数并写出已知展开式**

首先，我们将目标函数 $f(x) = \frac{\tan x}{1+x^2}$ 视为两个函数 $g(x) = \tan x$ 和 $h(x) = \frac{1}{1+x^2}$ 的乘积。

接下来，我们需要写出这两个函数在 $x=0$ 处的麦克劳林级数。我们需要保留足够的项数，以确保最终结果的精度达到题目要求的3次。

1.  **对于** $ \tan x $ **：**
    根据常用的麦克劳林公式，其展开式为：
    $$
    \tan x = x + \frac{1}{3}x^3 + \frac{2}{15}x^5 + \cdots
    $$
    由于我们最终只需要3次多项式，保留到 $x^3$ 项即可。

2.  **对于** $ \frac{1}{1+x^2} $ **：**
    这个函数可以看作是几何级数 $\frac{1}{1-u} = 1 + u + u^2 + u^3 + \cdots$ 的一个变体。
    令 $u = -x^2$，我们得到：
    $$
    \frac{1}{1+x^2} = \frac{1}{1-(-x^2)} = 1 - x^2 + x^4 - x^6 + \cdots
    $$
    同样，我们根据最终所需精度来截取这个级数。

**第二步：进行多项式乘法运算**

现在，我们将两个多项式相乘，并只关注那些乘积项次数小于或等于3的项：
$$
\frac{\tan x}{1+x^2} \approx \left(x + \frac{1}{3}x^3\right) \cdot \left(1 - x^2\right)
$$

展开这个乘法：
$$
= x \cdot 1 + x \cdot (-x^2) + \frac{1}{3}x^3 \cdot 1 + \frac{1}{3}x^3 \cdot (-x^2)
$$
$$
= x - x^3 + \frac{1}{3}x^3 - \frac{1}{3}x^5
$$

**第三步：合并同类项并舍弃高次项**

合并所有次数小于或等于3的项：
$$
x + \left(-1 + \frac{1}{3}\right)x^3 = x - \frac{2}{3}x^3
$$
所有高于3次的项（如 $-\frac{1}{3}x^5$）都归入佩亚诺余项 $o(x^3)$ 中。

**第四步：得出结论**

因此，函数 $f(x) = \frac{\tan x}{1+x^2}$ 在 $x=0$ 处的3次泰勒多项式为：
$$
x - \frac{2}{3}x^3
$$
