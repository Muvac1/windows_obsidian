这是一个非常深刻且优美的问题。Sylvester 不等式的等号成立条件确实是线性代数中考察子空间关系的经典切入点。

**结论先行：**

对于矩阵乘积 $AB$，其中 $A$ 为 $m \times n$ 矩阵，$B$ 为 $n \times p$ 矩阵。Sylvester 不等式指出 $r(AB) \ge r(A) + r(B) - n$。
**当且仅当 $N(A) \subseteq R(B)$ 时，等号成立。**

其中 $N(A)$ 表示 $A$ 的核空间（零空间，Null Space），$R(B)$ 表示 $B$ 的像空间（列空间，Column Space）。

---

### 详细解析与证明

我们要探究的是什么情况下 $r(A) + r(B) - n = r(AB)$。

我们可以通过**限制算子**和**维数公式**来从几何角度剖析这个问题。

#### 1. 建立核心关系式

考虑矩阵 $A$ 作为一个线性映射，当我们计算 $AB$ 时，实际上是先通过 $B$ 映射到一个空间，再由 $A$ 进行变换。因此，$AB$ 的像空间 $R(AB)$ 其实就是 $A$ 作用在 $B$ 的像空间 $R(B)$ 上得到的。

我们可以把 $A$ 看作是一个定义在 $R(B)$ 上的限制映射：
$A|_{R(B)}: R(B) \to R(AB)$

对于这个限制映射，应用**秩-零化度定理（Rank-Nullity Theorem）**，我们有：
$\dim(\text{定义域}) = \dim(\text{像}) + \dim(\text{核})$

对应到我们的变量：
*   **定义域**是 $R(B)$，维数为 $r(B)$。
*   **像**是 $R(AB)$，维数为 $r(AB)$。
*   **核**是什么？它是 $R(B)$ 中那些被 $A$ 映射为 $0$ 的向量。也就是说，这个核是 $R(B)$ 和 $N(A)$ 的交集，即 $R(B) \cap N(A)$。

于是，我们得到了一个恒等式：
$r(B) = r(AB) + \dim(R(B) \cap N(A))$

或者写作：
$r(AB) = r(B) - \dim(R(B) \cap N(A))$

> **几何直观：** $AB$ 的秩等于 $B$ 的秩减去“损失掉”的维数。损失掉的部分正是那些既在 $B$ 的列空间里，又不幸掉进 $A$ 的零空间里的向量构成的子空间。

#### 2. 推导等号成立条件

现在我们将上述恒等式代入 Sylvester 不等式的等号条件中。

我们需要证明：
$r(AB) = r(A) + r(B) - n \iff N(A) \subseteq R(B)$

**证明过程：**

由 $r(AB) = r(B) - \dim(R(B) \cap N(A))$，代入等式左边：

$r(B) - \dim(R(B) \cap N(A)) = r(A) + r(B) - n$

两边消去 $r(B)$：
$-\dim(R(B) \cap N(A)) = r(A) - n$

两边乘以 $-1$ 并整理（注意 $n - r(A) = \dim(N(A))$）：
$\dim(R(B) \cap N(A)) = n - r(A)$

即：
$\dim(R(B) \cap N(A)) = \dim(N(A))$

#### 3. 几何解释

此时我们得到了等价条件：$\dim(R(B) \cap N(A)) = \dim(N(A))$。

我们需要分析 $R(B) \cap N(A)$ 和 $N(A)$ 的关系：
1.  显然，交集 $R(B) \cap N(A)$ 必然是 $N(A)$ 的一个子空间。
2.  线性代数中有一条基本性质：如果子空间 $W \subseteq V$，且 $\dim(W) = \dim(V)$，那么 $W = V$。

因此，$\dim(R(B) \cap N(A)) = \dim(N(A))$ 当且仅当 $R(B) \cap N(A) = N(A)$。

这意味着 $N(A)$ 中的每一个向量都必须也在 $R(B)$ 中。用集合论语言描述就是：
$N(A) \subseteq R(B)$

---

### 总结

Sylvester 不等式 $r(AB) \ge r(A) + r(B) - n$ 实际上描述了矩阵乘法中秩的**最大损失情形**。

*   **秩的损失来源：** $AB$ 的秩比 $B$ 的秩小，是因为 $B$ 的一部分列向量（或者它们的线性组合）落入了 $A$ 的零空间 $N(A)$ 中，从而变成了 $0$。
*   **最大损失条件：** 当 $N(A)$ 被完全“吞没”在 $R(B)$ 中时（即 $N(A) \subseteq R(B)$），$A$ 的“杀伤力”被发挥到了极致，它能消灭的所有维数（即 $A$ 的整个零空间）全部来自于 $B$ 的有效输出。此时，$AB$ 的秩被压缩到最小，取到了不等式的下界。

这道题作为证明题考察时，核心得分点在于：
1.  利用限制映射建立 $r(AB) = r(B) - \dim(R(B) \cap N(A))$。
2.  利用 $n - r(A) = \dim(N(A))$ 进行代换。
3.  利用子空间维数相等推出子空间包含关系。